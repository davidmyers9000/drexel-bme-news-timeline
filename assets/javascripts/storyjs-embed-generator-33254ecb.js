/*
    TimelineJS - ver. 2.29.0 - 2014-01-22
    Copyright (c) 2012-2013 Northwestern University
    a project of the Northwestern University Knight Lab, originally created by Zach Wise
    https://github.com/NUKnightLab/TimelineJS
    This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
    If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
function getScriptPath(e){for(var t=document.getElementsByTagName("script"),a="",d=0;d<t.length;d++)t[d].src.match(e)&&(a=t[d].src);return a.split("?")[0].split("/").slice(0,-1).join("/")+"/"}function getUrlVars(e){var t,a,d=[],m=e.toString();m.match("&#038;")?m=m.replace("&#038;","&"):m.match("&#38;")?m=m.replace("&#38;","&"):m.match("&amp;")&&(m=m.replace("&amp;","&")),m.match("#")&&(m=m.split("#")[0]),a=m.slice(m.indexOf("?")+1).split("&");for(var r=0;r<a.length;r++)t=a[r].split("="),d.push(t[0]),d[t[0]]=t[1];return d}function getLinkAndIframe(){var e,t,a,d,m={},r=document.getElementById("embed-source-url"),n=document.getElementById("embed-width"),l=document.getElementById("embed-height"),u=document.getElementById("embed-maptype"),o=document.getElementById("embed-language"),c=(document.getElementById("embed_code"),document.getElementById("embed-font")),s=document.getElementById("embed-wordpressplugin"),g=document.getElementById("embed-startatend"),p=document.getElementById("embed-hashbookmark"),i=document.getElementById("embed-startzoomadjust"),h=document.getElementById("embed-startatslide"),v=document.getElementById("embed-debug"),b=document.getElementById("embed-googlemapkey"),_=!1,y=!1,I=!1;return d=r.value.match("docs.google.com")?getUrlVars(r.value).key:""==r.value?"0Agl_Dv6iEbDadHdKcHlHcTB5bzhvbF9iTWwyMmJHdkE":r.value,g.checked&&(_=!0),p.checked&&(y=!0),v.checked&&(I=!0),a="[timeline ",n.value>0&&(a+="width='"+n.value+"' "),l.value>0&&(a+="height='"+n.value+"' "),a+="font='"+c.value+"' ",a+="maptype='"+u.value+"' ",a+="lang='"+o.value+"' ",a+="src='"+r.value+"' ",_&&(a+="start_at_end='"+_+"' "),y&&(a+="hash_bookmark='"+y+"' "),I&&(a+="debug='"+I+"' "),""!=b.value&&(a+="gmap_key='"+b.value+"' "),parseInt(h.value,10)>0&&(a+="start_at_slide='"+parseInt(h.value,10)+"' "),parseInt(i.value,10)>0&&(a+="start_zoom_adjust='"+parseInt(i.value,10)+"' "),a+="]",m.wordpress=a,t=generator_embed_path+"?source="+d,t+="&font="+c.value,t+="&maptype="+u.value,t+="&lang="+o.value,_&&(t+="&start_at_end="+_),y&&(t+="&hash_bookmark="+y),I&&(t+="&debug="+I),parseInt(h.value,10)>0&&(t+="&start_at_slide="+parseInt(h.value,10)),parseInt(i.value,10)>0&&(t+="&start_zoom_adjust="+parseInt(i.value,10)),""!=b.value&&(t+="&gmap_key="+b.value),n.value>0&&(t+="&width="+n.value),l.value>0&&(t+="&height="+l.value),e="<iframe src='"+t+"'",(n.value>0||n.value.match("%"))&&(e+=" width='"+n.value+"'"),(l.value>0||l.value.match("%"))&&(e+=" height='"+l.value+"'"),e+=" frameborder='0'></iframe>",m.iframe=e,m.link=t,m.copybox=s.checked?a:e,m}function updateEmbedCode(){var e=document.getElementById("embed_code"),t=getLinkAndIframe();e.value=t.copybox,jQuery("#preview-embed-link").attr("href",t.link),jQuery("#preview-embed-iframe").html(t.iframe),jQuery("#preview-embed").css("display","block")}if("undefined"==typeof generator_embed_path||"undefined"==typeof generator_embed_path){var generator_embed_path=getScriptPath("storyjs-embed-generator-33254ecb.js").split("js/")[0];generator_embed_path.match("http")?generator_embed_path=generator_embed_path:"/"==generator_embed_path?generator_embed_path="index.html":generator_embed_path+="index.html"}